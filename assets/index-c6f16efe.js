import{E as d,S as G,d as ae,z as re,j as k,C as oe,K as se,L as ie,N as C,O as ne,Q as le,h as v,o as _,c as T,a as h,w as m,F as $,q as V,u as x,e as B,b as S,t as I,i as O,n as R,p as de,f as ce,g as pe}from"./index-651853eb.js";import{P as ue}from"./index-e9e7d625.js";import{T as he}from"./index-e42281fc.js";import{c as me,b as ge,a as fe,i as ye,L as W}from"./date-8774eb28.js";import{_ as z,K as be,D as ve,N as _e,G as Se,bN as De,a$ as we,R as xe,bO as j,bP as Le,C as Ce,F as K,bL as H,bM as n,bQ as Te,H as Ie,I as Pe,J as F}from"./charts-bdc98a47.js";import"./more-1d61723b.js";var ze=function(o){z(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return t.prototype.getInitialData=function(e,r){return be(this.getSource(),this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(e,r,a){return a.point(r.getItemLayout(e))},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}}},t}(ve);const Ae=ze;var Q=4,Ne=function(){function o(){}return o}(),P=function(o){z(t,o);function t(e){return o.call(this,e)||this}return t.prototype.getDefaultShape=function(){return new Ne},t.prototype.buildPath=function(e,r){var a=r.points,s=r.size,i=this.symbolProxy,l=i.shape,c=e.getContext?e.getContext():e,p=c&&s[0]<Q;if(p){this._ctx=c;return}this._ctx=null;for(var u=0;u<a.length;){var g=a[u++],f=a[u++];isNaN(g)||isNaN(f)||this.softClipShape&&!this.softClipShape.contain(g,f)||(l.x=g-s[0]/2,l.y=f-s[1]/2,l.width=s[0],l.height=s[1],i.buildPath(e,l,!0))}},t.prototype.afterBrush=function(){var e=this.shape,r=e.points,a=e.size,s=this._ctx;if(s)for(var i=0;i<r.length;){var l=r[i++],c=r[i++];isNaN(l)||isNaN(c)||this.softClipShape&&!this.softClipShape.contain(l,c)||s.fillRect(l-a[0]/2,c-a[1]/2,a[0],a[1])}},t.prototype.findDataIndex=function(e,r){for(var a=this.shape,s=a.points,i=a.size,l=Math.max(i[0],4),c=Math.max(i[1],4),p=s.length/2-1;p>=0;p--){var u=p*2,g=s[u]-l/2,f=s[u+1]-c/2;if(e>=g&&r>=f&&e<=g+l&&r<=f+c)return p}return-1},t}(_e),Me=function(){function o(){this.group=new Se}return o.prototype.isPersistent=function(){return!this._incremental},o.prototype.updateData=function(t,e){this.group.removeAll();var r=new P({rectHover:!0,cursor:"default"});r.setShape({points:t.getLayout("points")}),this._setCommon(r,t,!1,e),this.group.add(r),this._incremental=null},o.prototype.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var a=(r.endIndex-r.startIndex)*2,s=r.startIndex*4*2;e=new Float32Array(e.buffer,s,a)}r.setShape("points",e)})}},o.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>2e6?(this._incremental||(this._incremental=new De({silent:!0})),this.group.add(this._incremental)):this._incremental=null},o.prototype.incrementalUpdate=function(t,e,r){var a;this._incremental?(a=new P,this._incremental.addDisplayable(a,!0)):(a=new P({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end}),a.incremental=!0,this.group.add(a)),a.setShape({points:e.getLayout("points")}),this._setCommon(a,e,!!this._incremental,r)},o.prototype._setCommon=function(t,e,r,a){var s=e.hostModel;a=a||{};var i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=a.clipShape||null,t.symbolProxy=we(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var l=t.shape.size[0]<Q;t.useStyle(s.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var c=e.getVisual("style"),p=c&&c.fill;if(p&&t.setColor(p),!r){var u=xe(t);u.seriesIndex=s.seriesIndex,t.on("mousemove",function(g){u.dataIndex=null;var f=t.findDataIndex(g.offsetX,g.offsetY);f>=0&&(u.dataIndex=f+(t.startIndex||0))})}},o.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},o.prototype._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},o}();const ke=Me;var $e=function(o){z(t,o);function t(){var e=o!==null&&o.apply(this,arguments)||this;return e.type=t.type,e}return t.prototype.render=function(e,r,a){var s=e.getData(),i=this._updateSymbolDraw(s,e);i.updateData(s,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,r,a){var s=e.getData(),i=this._updateSymbolDraw(s,e);i.incrementalPrepareUpdate(s),this._finished=!1},t.prototype.incrementalRender=function(e,r,a){this._symbolDraw.incrementalUpdate(e,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=e.end===r.getData().count()},t.prototype.updateTransform=function(e,r,a){var s=e.getData();if(this.group.dirty(),!this._finished||s.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var i=j("").reset(e,r,a);i.progress&&i.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},t.prototype._getClipShape=function(e){var r=e.coordinateSystem,a=r&&r.getArea&&r.getArea();return e.get("clip",!0)?a:null},t.prototype._updateSymbolDraw=function(e,r){var a=this._symbolDraw,s=r.pipelineContext,i=s.large;return(!a||i!==this._isLargeDraw)&&(a&&a.remove(),a=this._symbolDraw=i?new ke:new Le,this._isLargeDraw=i,this.group.removeAll()),this.group.add(a.group),a},t.prototype.remove=function(e,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Ce);const Ve=$e;function Be(o){K(me),o.registerSeriesModel(Ae),o.registerChartView(Ve),o.registerLayout(j("scatter"))}const Oe=[{title:d("pages.dashboardDetail.topPanel.paneList.totalRequest"),number:"1126",upTrend:"10%"},{title:d("pages.dashboardDetail.topPanel.paneList.suppliers"),number:"13",downTrend:"13%"},{title:d("pages.dashboardDetail.topPanel.paneList.productCategory"),number:"4",upTrend:"10%"},{title:d("pages.dashboardDetail.topPanel.paneList.applicant"),number:90,downTrend:"44%",leftType:"icon-file-paste"},{title:d("pages.dashboardDetail.topPanel.paneList.completionRate"),number:80.5,upTrend:"70%"},{title:d("pages.dashboardDetail.topPanel.paneList.arrivalRate"),number:78,upTrend:"16%"}],Re=[];function U({dateTime:o=[],placeholderColor:t,borderColor:e}){const a=[],s=[],i=[];for(let l=0;l<40;l++){if(o.length>0){const c=(new Date(o[1]).getTime()-new Date(o[0]).getTime())/40,p=new Date(o[0]).getTime()+c*l;a.push(H(p).format("MM-DD"))}else a.push(H().subtract(40-l,"day").format("MM-DD"));s.push(n().toString()),i.push(n().toString())}return{color:G(),xAxis:{data:a,axisLabel:{color:t},splitLine:{show:!1},axisLine:{lineStyle:{color:e,width:1}}},yAxis:{type:"value",axisLabel:{color:t},nameTextStyle:{padding:[0,0,0,60]},axisTick:{show:!1,axisLine:{show:!1}},axisLine:{show:!1},splitLine:{lineStyle:{color:e}}},tooltip:{trigger:"item"},grid:{top:"5px",left:"25px",right:"5px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:[d("pages.dashboardDetail.procurement.goods.massageMachine"),d("pages.dashboardDetail.procurement.goods.coffeeMachine")],itemHeight:8,itemWidth:8,textStyle:{fontSize:12,color:t}},series:[{name:d("pages.dashboardDetail.procurement.goods.massageMachine"),symbolSize:10,data:i.reverse(),type:"scatter"},{name:d("pages.dashboardDetail.procurement.goods.coffeeMachine"),symbolSize:10,data:s.concat(s.reverse()),type:"scatter"}]}}function q({dateTime:o=[],placeholderColor:t,borderColor:e}){let r=[];for(let a=1;a<7;a++)r.push(d(`pages.dashboardDetail.chart.week${a}`));return o.length>0&&(r=Te(o,7)),{color:G(),grid:{top:"5%",right:"10px",left:"30px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:[d("pages.dashboardDetail.procurement.goods.cup"),d("pages.dashboardDetail.procurement.goods.tea"),d("pages.dashboardDetail.procurement.goods.honey"),d("pages.dashboardDetail.procurement.goods.flour")],textStyle:{fontSize:12,color:t}},xAxis:{type:"category",data:r,boundaryGap:!1,axisLabel:{color:t},axisLine:{lineStyle:{color:e,width:1}}},yAxis:{type:"value",axisLabel:{color:t},splitLine:{lineStyle:{color:e}}},tooltip:{trigger:"item"},series:[{showSymbol:!0,symbol:"circle",symbolSize:8,name:d("pages.dashboardDetail.procurement.goods.cup"),stack:"总量",data:[n(),n(),n(),n(),n(),n(),n()],type:"line",itemStyle:{borderColor:e,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:d("pages.dashboardDetail.procurement.goods.tea"),stack:"总量",data:[n(),n(),n(),n(),n(),n(),n()],type:"line",itemStyle:{borderColor:e,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:d("pages.dashboardDetail.procurement.goods.honey"),stack:"总量",data:[n(),n(),n(),n(),n(),n(),n()],type:"line",itemStyle:{borderColor:e,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:d("pages.dashboardDetail.procurement.goods.flour"),stack:"总量",data:[n(),n(),n(),n(),n(),n(),n()],type:"line",itemStyle:{borderColor:e,borderWidth:1}}]}}const Y=o=>(de("data-v-8bc04d64"),o=o(),ce(),o),We={class:"dashboard-panel-detail"},He={class:"dashboard-list-card__number"},Fe={class:"dashboard-list-card__text"},Ue={class:"dashboard-list-card__text-left"},qe=Y(()=>S("div",{id:"lineContainer",style:{width:"100%",height:"416px"}},null,-1)),Ge=Y(()=>S("div",{id:"scatterContainer",style:{width:"100%",height:"434px"}},null,-1)),je={name:"DashboardDetail"},Ke=ae({...je,setup(o){K([ge,fe,ye,Ie,Be,Pe]);const t=re(),e=k(()=>t.chartColors);let r,a;const s=()=>{r=document.getElementById("lineContainer"),a=F(r),a.setOption(q({...e.value}))};let i,l;const c=()=>{i=document.getElementById("scatterContainer"),l=F(i),l.setOption(U({...e.value}))},p=()=>{a==null||a.resize({width:r.clientWidth,height:r.clientHeight}),l==null||l.resize({width:i.clientWidth,height:i.clientHeight})},u=()=>{c(),s()};oe(()=>{u(),se(()=>{p()})});const{width:g,height:f}=ie();C([g,f],()=>{p()}),ne(()=>{J(),X()});const J=C(()=>t.mode,()=>{u()}),X=C(()=>t.brandTheme,()=>{le([a,l])}),Z=()=>{l.setOption(U({...e.value}))},E=y=>{const A=k(()=>t.chartColors);a.setOption(q({dateTime:y,...A.value}))};return(y,A)=>{const ee=v("t-icon"),D=v("t-card"),L=v("t-col"),N=v("t-row"),M=v("t-date-range-picker"),te=v("t-button");return _(),T("div",We,[h(D,{title:y.$t("pages.dashboardDetail.topPanel.title"),class:"dashboard-detail-card",bordered:!1},{default:m(()=>[h(N,{gutter:[16,16]},{default:m(()=>[(_(!0),T($,null,V(x(Oe),(b,w)=>(_(),B(L,{key:w,xs:6,xl:3},{default:m(()=>[h(D,{class:"dashboard-list-card",description:b.title},{default:m(()=>[S("div",He,I(b.number),1),S("div",Fe,[S("div",Ue,[O(I(y.$t("pages.dashboardDetail.topPanel.quarter"))+" ",1),h(he,{class:"icon",type:b.upTrend?"up":"down",describe:b.upTrend||b.downTrend},null,8,["type","describe"])]),h(ee,{name:"chevron-right"})])]),_:2},1032,["description"])]),_:2},1024))),128))]),_:1})]),_:1},8,["title"]),h(N,{gutter:[16,16],class:"row-margin"},{default:m(()=>[h(L,{xs:12,xl:9},{default:m(()=>[h(D,{class:"dashboard-detail-card",title:y.$t("pages.dashboardDetail.procurement.title"),bordered:!1},{actions:m(()=>[h(M,{class:"card-date-picker-container","default-value":x(W),theme:"primary",mode:"date",style:{width:"248px"},onChange:E},null,8,["default-value"])]),default:m(()=>[qe]),_:1},8,["title"])]),_:1}),h(L,{xs:12,xl:3},{default:m(()=>[(_(!0),T($,null,V(x(Re),(b,w)=>(_(),B(ue,{key:w,product:b,class:R({"row-margin":w!==0,"product-card":!0})},null,8,["product","class"]))),128))]),_:1})]),_:1}),h(D,{class:R(["dashboard-detail-card","row-margin"]),title:y.$t("pages.dashboardDetail.satisfaction.title"),bordered:!1},{actions:m(()=>[h(M,{class:"card-date-picker-container","default-value":x(W),theme:"primary",mode:"date",style:{display:"inline-block","margin-right":"var(--td-comp-margin-s)",width:"248px"},onChange:Z},null,8,["default-value"]),h(te,{class:"card-date-button"},{default:m(()=>[O(I(y.$t("pages.dashboardDetail.satisfaction.export")),1)]),_:1})]),default:m(()=>[Ge]),_:1},8,["title"])])}}});const et=pe(Ke,[["__scopeId","data-v-8bc04d64"]]);export{et as default};
