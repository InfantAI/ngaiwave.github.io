import{g as Z}from"./doll-fa5192f2.js";import{E as i,d as ee,z as ae,r as s,j as I,V as te,C as le,h as o,o as b,c as se,a as l,w as n,b as C,u as w,Y as z,e as T,i as r,t as p,M as ne,g as oe}from"./index-651853eb.js";import{_ as ie}from"./addDays.vue_vue_type_script_setup_true_lang-42b36b17.js";import{_ as ce}from"./reviewUserNextPlan.vue_vue_type_script_setup_true_lang-dcc07472.js";const de=[{title:i("pages.devices.userId"),align:"left",width:160,colKey:"userId",fixed:"left"},{title:i("pages.devices.username"),colKey:"userName",width:160},{title:i("pages.devices.status"),width:160,ellipsis:!0,colKey:"statusFlag"},{title:i("pages.devices.currentDollModel"),width:160,ellipsis:!0,colKey:"model"},{title:i("pages.devices.registrationTime"),width:160,ellipsis:!0,colKey:"createTime"},{title:i("pages.devices.totalRechargeAmount"),width:160,ellipsis:!0,colKey:"amount"},{title:i("pages.devices.operation"),align:"left",fixed:"right",width:360,colKey:"op"}],ue={class:"search-input"},re={class:"search-input"},pe={class:"search-input"},ve={name:"Devices"},ge=ee({...ve,setup(me){const B=ae(),u=s([]),c=s({pageSize:20,total:100,current:1}),v=s(""),f=s(!1),k=async()=>{f.value=!0;try{const e=await Z({language:"",page:{pageIndex:c.value.current,pageSize:c.value.pageSize},query:{}});u.value=e.content,c.value={...c.value,total:e.totalCount}}catch(e){console.log(e)}finally{f.value=!1}},g=s([1,2]),m=s(!1),M=e=>{d.value=e.rowIndex,m.value=!0},x=()=>{d.value=-1},d=s(-1),O=I(()=>{if(d.value>-1){const{userName:e,model:a}=u.value[d.value];return`确认停用用户${e}的玩偶${a}?`}return""}),F=()=>{u.value.splice(d.value,1),c.value.total=u.value.length;const e=g.value.indexOf(d.value);e>-1&&g.value.splice(e,1),m.value=!1,ne.success("删除成功"),x()},A=()=>{x()},R="index",E=e=>{g.value=e},L=(e,a)=>{console.log("分页变化",e,a),k()},j=(e,a)=>{console.log("统一Change",e,a)},_=s(!1),$=s({}),V=s(""),q=e=>{$.value=e.row,V.value=e.row.userName,_.value=!0},h=s(!1),U=s({}),N=s(""),P=e=>{U.value=e.row,N.value=e.row.userName,h.value=!0},Y=I(()=>({offsetTop:B.isUseTabsRouter?48:0,container:`.${te}-layout`}));return le(()=>{k()}),(e,a)=>{const D=o("t-input"),G=o("t-date-range-picker"),H=o("t-row"),K=o("t-tag"),y=o("t-link"),J=o("t-space"),Q=o("t-table"),W=o("t-card"),X=o("t-dialog");return b(),se("div",null,[l(W,{class:"list-card-container",bordered:!1},{default:n(()=>[l(H,null,{default:n(()=>[C("div",ue,[l(D,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=t=>v.value=t),placeholder:e.$t("pages.payment.placeholderuserid"),clearable:""},{"suffix-icon":n(()=>[l(w(z),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),C("div",re,[l(D,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=t=>v.value=t),placeholder:e.$t("pages.payment.placeholderpayid"),clearable:""},{"suffix-icon":n(()=>[l(w(z),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),C("div",pe,[l(G,{mode:"week",clearable:"","allow-input":""})])]),_:1}),l(Q,{data:u.value,columns:w(de),"row-key":R,"vertical-align":"top",hover:!0,pagination:c.value,"selected-row-keys":g.value,loading:f.value,"header-affixed-top":Y.value,onPageChange:L,onChange:j,onSelectChange:E},{statusFlag:n(({row:t})=>[t.statusFlag==="1"?(b(),T(K,{key:0,theme:"success",variant:"light"},{default:n(()=>[r(p(e.$t("pages.devices.statusOptions.normal")),1)]),_:1})):(b(),T(K,{key:1,theme:"danger",variant:"light"},{default:n(()=>[r(p(e.$t("pages.devices.statusOptions.disabled")),1)]),_:1}))]),op:n(t=>[l(J,null,{default:n(()=>[l(y,{theme:"primary",onClick:S=>P(t)},{default:n(()=>[r(p(e.$t("pages.devices.viewUserPlan")),1)]),_:2},1032,["onClick"]),l(y,{theme:"success",onClick:S=>q(t)},{default:n(()=>[r(p(e.$t("pages.devices.addVipDays")),1)]),_:2},1032,["onClick"]),l(y,{theme:"danger",onClick:S=>M(t)},{default:n(()=>[r(p(t.row.statusFlag===1?e.$t("pages.devices.disable"):e.$t("pages.devices.enable")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),l(X,{visible:m.value,"onUpdate:visible":a[2]||(a[2]=t=>m.value=t),header:"确定停用此玩偶？",body:O.value,"on-cancel":A,onConfirm:F},null,8,["visible","body"]),l(ie,{visible:_.value,"onUpdate:visible":a[3]||(a[3]=t=>_.value=t),data:$.value,"user-name":V.value},null,8,["visible","data","user-name"]),l(ce,{visible:h.value,"onUpdate:visible":a[4]||(a[4]=t=>h.value=t),data:U.value,"user-name":N.value},null,8,["visible","data","user-name"])])}}});const be=oe(ge,[["__scopeId","data-v-16881c23"]]);export{be as default};
