import{c as T,d as O,e as q}from"./doll-fa5192f2.js";import{P as E}from"./index-e9e7d625.js";import{I as b,_ as Y}from"./DialogForm.vue_vue_type_script_setup_true_lang-b20842fa.js";import{d as G,r as l,j as H,C as J,h as n,o as u,c as v,b as g,a as s,w as _,i as K,t as Q,e as y,u as R,Y as W,I as z,F as x,q as X,M as h,g as Z}from"./index-651853eb.js";import"./more-1d61723b.js";import"./getAuth-cd62a214.js";const ee={class:"list-card-operation"},ae={class:"search-input"},te={class:"list-card-items"},oe={class:"list-card-pagination"},le={key:1,class:"list-card-loading"},se={name:"ListCard"},ne=G({...se,setup(ie){const a=l({current:1,pageSize:12,total:0}),i=l(void 0),C=l([]),m=l(!0),c=async()=>{try{const e=await T({language:"",page:{pageIndex:a.value.current,pageSize:a.value.pageSize}});C.value=e.content,a.value={...a.value,total:e.totalCount}}catch(e){console.log(e)}finally{m.value=!1}},S=H(()=>i.value?`确认删除后${i.value.name}的所有产品信息将被清空, 且无法恢复`:"");J(()=>{c()});const r=l(!1),f=l(""),p=l(!1),d=l({...b}),V=e=>{a.value.pageSize=e,a.value.current=1,c()},w=e=>{a.value.current=e,c()},D=e=>{p.value=!0,i.value=e},I=async()=>{console.log("deleteProduct.value",i.value),await O(i.value.id).then(()=>{h.success("删除成功"),c()}).catch(e=>{console.log(e),h.error(e.message)}).finally(()=>{p.value=!1})},M=()=>{i.value=void 0,d.value={...b}},k=e=>{r.value=!0,Object.assign(d.value,e),console.log(d.value)},P=()=>{r.value=!0,Object.assign(d.value,b)},U=async e=>{let t=0;e.statusFlag===1?t=2:t=1,console.log("product",e),await q(e.id,t),await c(),h.success("")};return(e,t)=>{const L=n("t-button"),N=n("t-input"),$=n("t-col"),B=n("t-row"),j=n("t-pagination"),A=n("t-loading"),F=n("t-dialog");return u(),v("div",null,[g("div",ee,[s(L,{onClick:P},{default:_(()=>[K(Q(e.$t("pages.dollModel.create")),1)]),_:1}),g("div",ae,[s(N,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=o=>f.value=o),placeholder:e.$t("pages.dollModel.placeholder"),clearable:""},{"suffix-icon":_(()=>[f.value===""?(u(),y(R(W),{key:0,size:"var(--td-comp-size-xxxs)"})):z("",!0)]),_:1},8,["modelValue","placeholder"])])]),s(Y,{visible:r.value,"onUpdate:visible":t[1]||(t[1]=o=>r.value=o),data:d.value},null,8,["visible","data"]),a.value.total>0&&!m.value?(u(),v(x,{key:0},[g("div",te,[s(B,{gutter:[16,16]},{default:_(()=>[(u(!0),v(x,null,X(C.value.slice(a.value.pageSize*(a.value.current-1),a.value.pageSize*a.value.current),o=>(u(),y($,{key:o.index,lg:4,xs:6,xl:3},{default:_(()=>[s(E,{class:"list-card-item",product:o,onDeleteItem:D,onManageProduct:k,onUpdateStatus:U},null,8,["product"])]),_:2},1024))),128))]),_:1})]),g("div",oe,[s(j,{modelValue:a.value.current,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.current=o),"page-size":a.value.pageSize,"onUpdate:pageSize":t[3]||(t[3]=o=>a.value.pageSize=o),total:a.value.total,"page-size-options":[12,24,36],onPageSizeChange:V,onCurrentChange:w},null,8,["modelValue","page-size","total"])])],64)):m.value?(u(),v("div",le,[s(A,{size:"large",text:e.$t("pages.dollModel.placeholder")},null,8,["text"])])):z("",!0),s(F,{visible:p.value,"onUpdate:visible":t[4]||(t[4]=o=>p.value=o),header:e.$t("pages.dollModel.deleteConfirm"),body:S.value,"on-cancel":M,onConfirm:I},null,8,["visible","header","body"])])}}});const ge=Z(ne,[["__scopeId","data-v-4bf335ae"]]);export{ge as default};
