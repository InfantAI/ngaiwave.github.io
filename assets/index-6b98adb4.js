import{a as j}from"./doll-fa5192f2.js";import{E as s,d as q,z as Y,r as i,j as b,C as G,V as H,h as n,o as _,c as J,a as t,w as l,b as m,u as f,Y as k,e as S,i as h,t as y,M as Q,g as W}from"./index-651853eb.js";const X=[{title:s("pages.devices.user"),align:"left",width:160,colKey:"userName",fixed:"left"},{title:s("pages.devices.userId"),colKey:"userId",width:160},{title:s("pages.devices.model"),width:160,ellipsis:!0,colKey:"model"},{title:s("pages.devices.modelName"),width:160,ellipsis:!0,colKey:"modelName"},{title:s("pages.devices.lastDataReportTime"),width:160,ellipsis:!0,colKey:"lastTime"},{title:s("pages.devices.onlineStatus"),width:160,ellipsis:!0,colKey:"statusFlag"},{title:s("pages.devices.toyActivationTime"),width:160,ellipsis:!0,colKey:"activateTime"},{title:s("pages.devices.subscriptionDetails"),width:160,ellipsis:!0,colKey:"orderNo"},{title:s("pages.devices.operation"),align:"left",fixed:"right",width:160,colKey:"op"}],Z={class:"search-input"},ee={class:"search-input"},te={class:"search-input"},ae={name:"ListBase"},le=q({...ae,setup(oe){const V=Y(),u=i([]),c=i({pageSize:20,total:100,current:1}),r=i(""),v=i(!1),K=async()=>{v.value=!0;try{const e=await j({language:"",page:{pageIndex:c.value.current,pageSize:c.value.pageSize},query:{}});u.value=e.content,c.value={...c.value,total:e.totalCount}}catch(e){console.log(e)}finally{v.value=!1}},d=i(-1),I=b(()=>{if(d.value>-1){const{name:e}=u.value[d.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""});G(()=>{K()});const p=i(!1),g=i([1,2]),w=()=>{d.value=-1},N=()=>{u.value.splice(d.value,1),c.value.total=u.value.length;const e=g.value.indexOf(d.value);e>-1&&g.value.splice(e,1),p.value=!1,Q.success("删除成功"),w()},T=()=>{w()},$="index",z=e=>{g.value=e},B=(e,a)=>{console.log("分页变化",e,a)},D=(e,a)=>{console.log("统一Change",e,a)},U=e=>{d.value=e.rowIndex,p.value=!0},E=b(()=>({offsetTop:V.isUseTabsRouter?48:0,container:`.${H}-layout`}));return(e,a)=>{const x=n("t-input"),L=n("t-date-range-picker"),M=n("t-row"),C=n("t-tag"),F=n("t-link"),P=n("t-space"),R=n("t-table"),A=n("t-card"),O=n("t-dialog");return _(),J("div",null,[t(A,{class:"list-card-container",bordered:!1},{default:l(()=>[t(M,null,{default:l(()=>[m("div",Z,[t(x,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o),placeholder:e.$t("pages.payment.placeholderuserid"),clearable:""},{"suffix-icon":l(()=>[t(f(k),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),m("div",ee,[t(x,{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=o=>r.value=o),placeholder:e.$t("pages.payment.placeholderpayid"),clearable:""},{"suffix-icon":l(()=>[t(f(k),{size:"16px"})]),_:1},8,["modelValue","placeholder"])]),m("div",te,[t(L,{mode:"week",clearable:"","allow-input":""})])]),_:1}),t(R,{data:u.value,columns:f(X),"row-key":$,"vertical-align":"top",hover:!0,pagination:c.value,"selected-row-keys":g.value,loading:v.value,"header-affixed-top":E.value,onPageChange:B,onChange:D,onSelectChange:z},{statusFlag:l(({row:o})=>[o.statusFlag?(_(),S(C,{key:0,theme:"success",variant:"light"},{default:l(()=>[h(y(e.$t("pages.devices.onlineStatusEnum.online")),1)]),_:1})):(_(),S(C,{key:1,theme:"danger",variant:"light"},{default:l(()=>[h(y(e.$t("pages.devices.onlineStatusEnum.offline")),1)]),_:1}))]),op:l(o=>[t(P,null,{default:l(()=>[t(F,{theme:"danger",onClick:se=>U(o)},{default:l(()=>[h(y(e.$t("pages.devices.stop")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),t(O,{visible:p.value,"onUpdate:visible":a[2]||(a[2]=o=>p.value=o),header:"确认删除当前所选合同？",body:I.value,"on-cancel":T,onConfirm:N},null,8,["visible","body"])])}}});const ce=W(le,[["__scopeId","data-v-2787ecb8"]]);export{ce as default};
