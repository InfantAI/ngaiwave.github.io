import{E as c,d as G,z as W,r as s,j as k,C as H,G as J,V as Q,h as l,o as X,c as Y,a as t,w as o,b as Z,P as ee,i as g,t as _,M as te,g as oe}from"./index-651853eb.js";import{a as ae}from"./algorithm-ae28a8c0.js";const le=[{colKey:"row-select",type:"multiple",width:64,fixed:"left"},{title:c("pages.algorithm.resources.collectionTime"),align:"left",width:220,colKey:"collectionTime",fixed:"left"},{title:c("pages.algorithm.resources.type"),colKey:"type",width:160},{title:c("pages.algorithm.resources.userId"),width:160,ellipsis:!0,colKey:"userId"},{title:c("pages.algorithm.resources.tag"),width:160,ellipsis:!0,colKey:"tag"},{title:c("pages.algorithm.resources.storageLocation"),width:160,ellipsis:!0,colKey:"storageLocation"},{title:c("pages.algorithm.resources.operation"),align:"left",fixed:"right",width:160,colKey:"op"}],ne={name:"",no:"",type:""},se={class:"left-operation-container"},ie={name:"Resources"},re=G({...ie,setup(ce){const V=W(),$=s(le),i=s({...ne}),u=s([]),p=s({defaultPageSize:20,total:100,defaultCurrent:1}),v=s(!1),K=async()=>{v.value=!0;try{const{list:e}=await ae();u.value=e,p.value={...p.value,total:e.length}}catch(e){console.log(e)}finally{v.value=!1}},r=s(-1),S=k(()=>{if(r.value>-1){const{name:e}=u.value[r.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""});H(()=>{K()});const m=s(!1),f=s([1,2]),I=J(),b=()=>{r.value=-1},T=()=>{u.value.splice(r.value,1),p.value.total=u.value.length;const e=f.value.indexOf(r.value);e>-1&&f.value.splice(e,1),m.value=!1,te.success("删除成功"),b()},L=()=>{b()},U="index",D=e=>{f.value=e},N=(e,a)=>{console.log("分页变化",e,a)},O=(e,a)=>{console.log("统一Change",e,a)},R=()=>{I.push("/detail/base")},M=e=>{r.value=e.rowIndex,m.value=!0},P=k(()=>({offsetTop:V.isUseTabsRouter?48:0,container:`.${Q}-layout`}));return(e,a)=>{const w=l("t-select"),y=l("t-form-item"),d=l("t-col"),B=l("t-input"),h=l("t-row"),C=l("t-button"),z=l("t-form"),x=l("t-link"),j=l("t-space"),E=l("t-table"),q=l("t-card"),A=l("t-dialog");return X(),Y("div",null,[t(q,{class:"list-card-container",bordered:!1},{default:o(()=>[t(h,{justify:"space-between"},{default:o(()=>[Z("div",se,[t(z,{ref:"form",data:i.value,"label-width":80,colon:""},{default:o(()=>[t(h,null,{default:o(()=>[t(d,{span:10},{default:o(()=>[t(h,{gutter:[24,24]},{default:o(()=>[t(d,{span:6},{default:o(()=>[t(y,{label:e.$t("pages.algorithm.resources.type"),name:"type"},{default:o(()=>[t(w,{modelValue:i.value.type,"onUpdate:modelValue":a[0]||(a[0]=n=>i.value.type=n),style:{display:"inline-block"},class:"form-item-content",clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(d,{span:6},{default:o(()=>[t(y,{label:e.$t("pages.algorithm.resources.userId"),name:"no"},{default:o(()=>[t(B,{modelValue:i.value.no,"onUpdate:modelValue":a[1]||(a[1]=n=>i.value.no=n),class:"form-item-content",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(d,{span:6},{default:o(()=>[t(y,{label:e.$t("pages.algorithm.resources.tag"),name:"type"},{default:o(()=>[t(w,{modelValue:i.value.type,"onUpdate:modelValue":a[2]||(a[2]=n=>i.value.type=n),style:{display:"inline-block"},class:"form-item-content",clearable:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),t(d,{span:2,class:"operation-container"},{default:o(()=>[t(C,{theme:"primary",type:"submit",style:ee({marginLeft:"var(--td-comp-margin-s)"})},{default:o(()=>[g(_(e.$t("components.commonTable.query")),1)]),_:1},8,["style"]),t(C,{type:"reset",variant:"base",theme:"default"},{default:o(()=>[g(_(e.$t("components.commonTable.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["data"])])]),_:1}),t(E,{data:u.value,columns:$.value,"row-key":U,"vertical-align":"top",hover:!0,pagination:p.value,"selected-row-keys":f.value,loading:v.value,"header-affixed-top":P.value,onPageChange:N,onChange:O,onSelectChange:D},{op:o(n=>[t(j,null,{default:o(()=>[t(x,{theme:"primary",onClick:a[3]||(a[3]=F=>R())},{default:o(()=>[g(_(e.$t("pages.algorithm.resources.operationOptions.download")),1)]),_:1}),t(x,{theme:"danger",onClick:F=>M(n)},{default:o(()=>[g(_(e.$t("pages.algorithm.resources.operationOptions.tag")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),t(A,{visible:m.value,"onUpdate:visible":a[4]||(a[4]=n=>m.value=n),header:"确认删除当前所选合同？",body:S.value,"on-cancel":L,onConfirm:T},null,8,["visible","body"])])}}});const pe=oe(re,[["__scopeId","data-v-30da0354"]]);export{pe as default};
